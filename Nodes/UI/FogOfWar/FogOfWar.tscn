[gd_scene load_steps=8 format=2]

[ext_resource path="res://Nodes/UI/FogOfWar/FogOfWar.gd" type="Script" id=1]
[ext_resource path="res://Nodes/UI/FogOfWar/ViewTemplateDraw.gd" type="Script" id=2]
[ext_resource path="res://Resources/Textures/fog_of_war.png" type="Texture2D" id=3]
[ext_resource path="res://Resources/Materials/FogOfWar.gdshader" type="Shader" id=4]
[ext_resource path="res://Nodes/Map/ZIndexer.tscn" type="PackedScene" id=5]

[sub_resource type="ShaderMaterial" id=1]
shader = ExtResource( 4 )
shader_param/fog_visual_texture_tile = 6.123
shader_param/noise_power = 0.2
shader_param/noise_tiling = 1000.0
shader_param/noise_speed = 0.2
shader_param/col = Vector3( 0, 0, 0 )
shader_param/fog_visual_texture = ExtResource( 3 )

[sub_resource type="GDScript" id=2]
script/source = "extends ColorRect

func _ready():
	size = get_parent().size
	await get_tree().idle_frame
	await get_tree().idle_frame
	await get_tree().idle_frame
	queue_free()
"

[node name="FogOfWar" type="Node2D" groups=["fog_of_war"]]
z_index = 3000
z_as_relative = false
script = ExtResource( 1 )

[node name="FogOfWar" type="Sprite2D" parent="."]
material = SubResource( 1 )
z_index = 3000
z_as_relative = false
centered = false

[node name="VP" type="SubViewport" parent="."]
size = Vector2( 1024, 1024 )
handle_input_locally = false
hdr = false
usage = 0
render_target_clear_mode = 2
render_target_update_mode = 1
gui_disable_input = true

[node name="clear_color" type="ColorRect" parent="VP"]
offset_right = 512.0
offset_bottom = 512.0
color = Color( 0, 0, 0, 1 )
script = SubResource( 2 )

[node name="clear_fog_draw" type="Node2D" parent="VP"]
script = ExtResource( 2 )

[node name="ZIndexer" parent="." instance=ExtResource( 5 )]
z_index = 3000
