[gd_scene load_steps=10 format=2]

[ext_resource path="res://Nodes/Player/Weapons/PlayerSprite/Shotgun.png" type="Texture2D" id=1]
[ext_resource path="res://Nodes/Player/Weapons/PlayerSprite/GunSprite.gd" type="Script" id=2]
[ext_resource path="res://Nodes/Player/Weapons/PlayerSprite/MachineGun.png" type="Texture2D" id=3]
[ext_resource path="res://Nodes/Effects/MuzzleFlash/MuzzleFlash.tscn" type="PackedScene" id=4]
[ext_resource path="res://Nodes/Player/Weapons/PlayerSprite/Shotgun_short.png" type="Texture2D" id=5]

[sub_resource type="Shader" id=15]
code = "shader_type canvas_item;

uniform sampler2D noise;
uniform float ray_length = 300;
uniform float noise_scale = 5;

uniform vec4 ray_color :source_color = vec4(1.0,0.0,0.0,1.0);

void fragment() {
	float noise_tex = texture(noise, vec2(SCREEN_UV.x*noise_scale+TIME *0.2, SCREEN_UV.y*noise_scale+TIME *0.2)).r;
	COLOR.a = 2.0 * noise_tex * (1.0-UV.x * ray_length/300.0 ) * ray_color.a;
//	COLOR.a = (max(0.0, snoise( vec3( SCREEN_UV*50.0, TIME*2.0 ) ))*0.5 + 0.3) * (1.0-UV.x);
	COLOR.rgb = ray_color.rgb;
}
"

[sub_resource type="FastNoiseLite" id=17]
period = 8.5
persistence = 0.0
lacunarity = 0.1

[sub_resource type="NoiseTexture" id=16]
width = 128
height = 128
seamless = true
bump_strength = 13.5
noise = SubResource( 17 )

[sub_resource type="ShaderMaterial" id=20]
shader = SubResource( 15 )
shader_param/ray_length = 300.0
shader_param/noise_scale = 15.0
shader_param/ray_color = Color( 1, 0, 0, 1 )
shader_param/noise = SubResource( 16 )

[node name="Shotgun" type="Node2D"]
script = ExtResource( 2 )

[node name="Sprite2D" type="Sprite2D" parent="."]
position = Vector2( -2, 0 )
scale = Vector2( 0.04, 0.04 )
texture = ExtResource( 5 )
offset = Vector2( 80, 0 )

[node name="LaserSight" type="Line2D" parent="Sprite2D"]
unique_name_in_owner = true
show_behind_parent = true
material = SubResource( 20 )
position = Vector2( 288.851, -1.28746e-05 )
scale = Vector2( 25, 25 )
points = PackedVector2Array( 0, 0, 100, 0 )
width = 1.0
default_color = Color( 1, 1, 1, 1 )
texture_mode = 2

[node name="ShootPoint" type="Node2D" parent="Sprite2D"]
position = Vector2( 237.5, -1.28746e-05 )
scale = Vector2( 25, 25 )

[node name="MuzzleFlash" parent="Sprite2D/ShootPoint" instance=ExtResource( 4 )]
position = Vector2( 6.5, 0 )
scale = Vector2( 0.5, 0.5 )

[node name="Sprite2" type="Sprite2D" parent="Sprite2D"]
z_index = 10
texture = ExtResource( 5 )
offset = Vector2( 234, 0 )
region_enabled = true
region_rect = Rect2( 320, 0, 500, 192 )

[node name="Sprite_old" type="Sprite2D" parent="."]
visible = false
position = Vector2( -2, 0 )
rotation = 0.122173
scale = Vector2( 0.05, 0.05 )
texture = ExtResource( 1 )

[node name="MachineGun" type="Sprite2D" parent="."]
visible = false
position = Vector2( 10.2013, 40.6075 )
scale = Vector2( 0.05, 0.05 )
texture = ExtResource( 3 )

[node name="Shotgun" type="Sprite2D" parent="."]
visible = false
position = Vector2( 20.2341, 47.7808 )
scale = Vector2( 0.05, 0.05 )
texture = ExtResource( 1 )
offset = Vector2( -36.5935, -5.98401 )

[node name="Shotgun2" type="Sprite2D" parent="."]
visible = false
position = Vector2( 10.1518, 34.7206 )
scale = Vector2( 0.032, 0.032 )
texture = ExtResource( 1 )
offset = Vector2( -36.5935, -5.98401 )
