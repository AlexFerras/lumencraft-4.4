[gd_scene load_steps=17 format=2]

[ext_resource path="res://Nodes/Enemies/Ursacetus/Idle.png" type="Texture2D" id=1]
[ext_resource path="res://Nodes/Enemies/Ursacetus/Walk.png" type="Texture2D" id=3]
[ext_resource path="res://Nodes/Enemies/Ursacetus/AttackLeftHand.png" type="Texture2D" id=4]
[ext_resource path="res://Nodes/Enemies/Ursacetus/Death.png" type="Texture2D" id=5]
[ext_resource path="res://Nodes/Buildings/Common/RayChecker.tscn" type="PackedScene" id=6]
[ext_resource path="res://Nodes/Map/ZIndexer.tscn" type="PackedScene" id=7]

[sub_resource type="GDScript" id=1]
script/source = "extends WalkingEnemy

const PUNCH_RANGE = 5000

@onready var punch_position := $Sprite2D/Collisions/Marker2D as Marker2D
@onready var checker := $RayChecker
@onready var audio := $AudioStreamPlayer2D

@export var sleeping: bool

var prev_pos: Vector2
var is_destroying: bool

func _ready() -> void:
	audio.set_meta(\"ignore_warning\", true)

func look_for_target(delta: float):
	if sleeping:
		return
	
	if not path and timer >= 1:
		if Utils.game.core:
			search_path_to(Utils.game.core.global_position)
		else:
			search_path_to(Utils.game.main_player.global_position)
		timer = 0
	else:
		follow_path()
	
	var targets = Utils.game.map.player_tracker.getTrackingNodes2DInCircle(global_position, search_target_radius, true)
	
	if not targets.is_empty():
		var max_dist := INF
		for t in targets:
			var dist: float = global_position.distance_squared_to(t.global_position)
			if dist < max_dist:
				target = t
				max_dist = dist
		
		set_state(\"goto_target\")

func global_state(delta: float):
	super.global_state(delta)
	
	if state != \"attack\" and state != \"is_dead\":
		if position != prev_pos:
			animator.play(\"Walk\")
		else:
			animator.play(\"Idle\")
	prev_pos = position
	
	if is_destroying:
		Utils.explode_circle(punch_position.global_position, 25, 30000, 500000,10)
		Utils.explode_circle((punch_position.global_position + global_position) * 0.5, 25, 30000, 500000,10)
		Utils.explode_circle(global_position, 25, 30000, 500000,10)

func goto_target(delta: float):
	if enter_state:
		path.clear()
	
	if not validate_target():
		set_state(\"look_for_target\")
		return
	
	if path and global_position.distance_squared_to(path.back()) <= PUNCH_RANGE or global_position.distance_squared_to(target.global_position) <= PUNCH_RANGE:
		set_state(\"attack\")
		return
	
	if not path:
		search_path_to_target(3)
	
	if not path:
		set_state(\"attack\")
		return
	
	follow_path()
	
	if timer >= 1:
		timer = 0
		path.clear()
		
		if checker.get_raycast():
			set_state(\"attack\")

func attack(delta: float):
	if enter_state:
		path.clear()
		velocity = Vector2()
		rotation = global_position.direction_to(target.global_position).angle()
		animator.play(\"AttackLeftHand\")
		Utils.play_sample(Utils.random_sound(\"res://SFX/Enemies/GRUBAS/Attack\"), audio, false, 1.1)

func animation_finished(anim_name: String) -> void:
	if state == \"attack\":
		set_state(\"goto_target\")

func is_dead(delta):
	pass

func on_attack():
	
	pass

func destroy_start():
	is_destroying = true
	get_tree().create_timer(0.1).connect(\"timeout\", Callable(Utils.game, \"shake\").bind(15))

func destroy_end():
	is_destroying = false

func spawn_flaki():
	for flaki in $Sprite2D/FlakiSpawners.get_children():
		Utils.game.map.pixel_map.flesh_manager.spawn_in_position(flaki.global_position, 500, Vector2())
		await get_tree().create_timer(0.03).timeout

func on_dead():
	set_state(\"is_dead\")
	velocity = Vector2()
	$PunchHit.queue_free()
	animator.play(\"Death\")
	Utils.play_sample(preload(\"res://SFX/Enemies/GRUBAS/Death.wav\"), audio)
	await animator.animation_finished
	queue_free()

func fallen():
	Utils.play_sample(\"res://SFX/Enemies/GRUBAS/Fall.wav\")
	Utils.game.shake(40)
	for flaki in $Sprite2D/FlakiSpawners.get_children():
		Utils.explode_circle(flaki.global_position, 50, 30000, 500000,10)

func step():
	Utils.play_sample(Utils.random_sound(\"res://SFX/Enemies/GRUBAS/Footsteps\"), audio, false, 1.1)
	Utils.game.shake(2)

func on_hit(data:Dictionary) -> void:
	sleeping = false
	Utils.play_sample(Utils.random_sound(\"res://SFX/Enemies/GRUBAS/Grunt\"), audio, false, 1.1)
"

[sub_resource type="CircleShape2D" id=14]
radius = 24.0

[sub_resource type="CircleShape2D" id=3]
radius = 15.0

[sub_resource type="GDScript" id=5]
resource_name = "PunchHit"
script/source = "extends Area2D

func _ready() -> void:
	Utils.init_enemy_projectile(self, self, {damage = 50})

func on_hit():
	if has_meta(\"last_attacked\"):
		var attacked = get_meta(\"last_attacked\")
		if attacked is Player:
			attacked.linear_velocity = get_parent().global_position.direction_to(attacked.global_position) * 2000
"

[sub_resource type="CapsuleShape2D" id=15]
radius = 13.4666
height = 35.4512

[sub_resource type="Animation" id=12]
length = 131.0
step = 1.0
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ ExtResource( 4 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("Sprite2D:hframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ 11 ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("Sprite2D:vframes")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ 12 ]
}
tracks/3/type = "value"
tracks/3/path = NodePath("Sprite2D/Collisions/Marker2D:position")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/keys = {
"times": PackedFloat32Array( 53, 56, 59, 65 ),
"transitions": PackedFloat32Array( 0.5, 1, 1, 2 ),
"update": 0,
"values": [ Vector2( 69.2523, -76.483 ), Vector2( 124.686, 7.05682 ), Vector2( 114.676, 79.6363 ), Vector2( 64.7208, 136.642 ) ]
}
tracks/4/type = "value"
tracks/4/path = NodePath("PunchHit/CollisionShape2D:disabled")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/keys = {
"times": PackedFloat32Array( 0, 55, 60 ),
"transitions": PackedFloat32Array( 1, 1, 1 ),
"update": 1,
"values": [ true, false, true ]
}
tracks/5/type = "method"
tracks/5/path = NodePath(".")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/keys = {
"times": PackedFloat32Array( 53, 65 ),
"transitions": PackedFloat32Array( 1, 1 ),
"values": [ {
"args": [  ],
"method": "destroy_start"
}, {
"args": [  ],
"method": "destroy_end"
} ]
}
tracks/6/type = "value"
tracks/6/path = NodePath("Sprite2D:position")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ Vector2( 5.5, -19.5 ) ]
}
tracks/7/type = "value"
tracks/7/path = NodePath("Sprite2D:frame")
tracks/7/interp = 1
tracks/7/loop_wrap = true
tracks/7/imported = false
tracks/7/enabled = true
tracks/7/keys = {
"times": PackedFloat32Array( 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130 ),
"transitions": PackedFloat32Array( 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130 ]
}

[sub_resource type="Animation" id=13]
length = 200.0
step = 1.0
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ ExtResource( 5 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("Sprite2D:hframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ 11 ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("Sprite2D:vframes")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ 11 ]
}
tracks/3/type = "method"
tracks/3/path = NodePath(".")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/keys = {
"times": PackedFloat32Array( 80, 120 ),
"transitions": PackedFloat32Array( 1, 1 ),
"values": [ {
"args": [  ],
"method": "fallen"
}, {
"args": [  ],
"method": "spawn_flaki"
} ]
}
tracks/4/type = "value"
tracks/4/path = NodePath("Sprite2D:modulate")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/keys = {
"times": PackedFloat32Array( 0, 178, 200 ),
"transitions": PackedFloat32Array( 0.5, 0.5, 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 1 ), Color( 1, 1, 1, 1 ), Color( 0, 0, 0, 0 ) ]
}
tracks/5/type = "value"
tracks/5/path = NodePath("Sprite2D:position")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ Vector2( 42.5, -17.5 ) ]
}
tracks/6/type = "value"
tracks/6/path = NodePath("Sprite2D:frame")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/keys = {
"times": PackedFloat32Array( 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119 ),
"transitions": PackedFloat32Array( 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119 ]
}

[sub_resource type="Animation" id=8]
resource_name = "Idle"
length = 67.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ ExtResource( 1 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("Sprite2D:hframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ 8 ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("Sprite2D:vframes")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PackedFloat32Array( 0, 0.1 ),
"transitions": PackedFloat32Array( 1, 1 ),
"update": 0,
"values": [ 9, 9 ]
}
tracks/3/type = "value"
tracks/3/path = NodePath("Sprite2D:position")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ Vector2( 0, 0 ) ]
}
tracks/4/type = "value"
tracks/4/path = NodePath("Sprite2D:frame")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/keys = {
"times": PackedFloat32Array( 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66 ),
"transitions": PackedFloat32Array( 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66 ]
}

[sub_resource type="Animation" id=9]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath("PunchHit/CollisionShape2D:disabled")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ true ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("Sprite2D:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 1 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("Sprite2D/Collisions/Marker2D:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ Vector2( 69.2523, -76.483 ) ]
}
tracks/3/type = "value"
tracks/3/path = NodePath("Sprite2D:position")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ Vector2( 42.5, -17.5 ) ]
}

[sub_resource type="Animation" id=11]
length = 80.0
loop = true
step = 1.0
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ ExtResource( 3 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("Sprite2D:hframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ 9 ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("Sprite2D:vframes")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PackedFloat32Array( 0 ),
"transitions": PackedFloat32Array( 1 ),
"update": 0,
"values": [ 9 ]
}
tracks/3/type = "value"
tracks/3/path = NodePath("Sprite2D:position")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/keys = {
"times": PackedFloat32Array( 0, 26.7391 ),
"transitions": PackedFloat32Array( 1, 1 ),
"update": 0,
"values": [ Vector2( 0, 2 ), Vector2( 0, 4 ) ]
}
tracks/4/type = "value"
tracks/4/path = NodePath("Sprite2D:frame")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/keys = {
"times": PackedFloat32Array( 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79 ),
"transitions": PackedFloat32Array( 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79 ]
}
tracks/5/type = "method"
tracks/5/path = NodePath(".")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/keys = {
"times": PackedFloat32Array( 40, 74 ),
"transitions": PackedFloat32Array( 1, 1 ),
"values": [ {
"args": [  ],
"method": "step"
}, {
"args": [  ],
"method": "step"
} ]
}

[node name="GRUBAS" type="Node2D"]
z_index = 800
z_as_relative = false
script = SubResource( 1 )
waypoint_radius = 18.0
walk_speed = 50.0
search_target_radius = 400.0

[node name="Wall" type="StaticBody2D" parent="."]
position = Vector2( -14.1913, -0.934753 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Wall"]
shape = SubResource( 14 )

[node name="Hitbox" type="Area2D" parent="."]
position = Vector2( 2.52553, 0 )
collision_layer = 32
collision_mask = 32

[node name="Shape2D" type="CollisionShape2D" parent="Hitbox"]
position = Vector2( -15, 0 )
shape = SubResource( 3 )

[node name="PunchHit" type="Area2D" parent="."]
position = Vector2( 68.5736, 0 )
script = SubResource( 5 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="PunchHit"]
shape = SubResource( 15 )
disabled = true

[node name="Sprite2D" type="Sprite2D" parent="."]
position = Vector2( 42.5, -17.5 )
scale = Vector2( 0.5, 0.5 )
texture = ExtResource( 3 )
hframes = 9
vframes = 9
frame = 79

[node name="Collisions" type="Node2D" parent="Sprite2D"]

[node name="LeftStart" type="Marker2D" parent="Sprite2D/Collisions"]
position = Vector2( 9, -29 )
z_index = 1023

[node name="LeftEnd" type="Marker2D" parent="Sprite2D/Collisions"]
position = Vector2( 19, -35 )
z_index = 1023

[node name="RightStart" type="Marker2D" parent="Sprite2D/Collisions"]
position = Vector2( 9, 29 )
z_index = 1023

[node name="RightEnd" type="Marker2D" parent="Sprite2D/Collisions"]
position = Vector2( 19, 35 )
z_index = 1023

[node name="Marker2D" type="Marker2D" parent="Sprite2D/Collisions"]
position = Vector2( 69.2523, -76.483 )

[node name="FlakiSpawners" type="Node2D" parent="Sprite2D"]
position = Vector2( -1.20718, 2.44035 )

[node name="Flaki1" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( -96.9204, 44.3971 )

[node name="Flaki2" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( -59.6586, 44.3971 )

[node name="Flaki3" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( -22.0003, 32.7032 )

[node name="Flaki4" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 10.1083, 16.0543 )

[node name="Flaki5" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 40.6313, 8.12624 )

[node name="Flaki6" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 41.8204, 33.0996 )

[node name="Flaki7" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 52.3251, 56.0909 )

[node name="Flaki8" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 78.2895, 55.8927 )

[node name="Flaki9" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 93.551, 44.0006 )

[node name="Flaki10" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 111.984, 33.6942 )

[node name="Flaki11" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 137.353, 34.6852 )

[node name="Flaki12" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 147.263, 12.0902 )

[node name="Flaki13" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 129.624, 1.78378 )

[node name="Flaki14" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 133.588, -11.8921 )

[node name="Flaki15" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 147.264, -33.2978 )

[node name="Flaki16" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 121.696, -53.118 )

[node name="Flaki17" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 91.569, -62.6316 )

[node name="Flaki18" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 63.028, -76.5057 )

[node name="Flaki19" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 53.3162, -99.2988 )

[node name="Flaki20" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 87.2086, -90.578 )

[node name="Flaki21" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 119.714, -92.3618 )

[node name="Flaki22" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 84.6319, -114.164 )

[node name="Flaki23" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 40.6313, -132.993 )

[node name="Flaki24" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 26.1626, -105.839 )

[node name="Flaki25" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 27.1536, -75.9111 )

[node name="Flaki26" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 6.34247, -54.5054 )

[node name="Flaki27" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( -24.3787, -51.9288 )

[node name="Flaki28" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( -62.4333, -57.8748 )

[node name="Flaki29" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( -92.7581, -50.3431 )

[node name="Flaki30" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( -115.749, -39.0456 )

[node name="Flaki31" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( -86.8121, -28.541 )

[node name="Flaki32" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( -52.7215, -19.4238 )

[node name="Flaki33" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( -43.2078, 3.17116 )

[node name="Flaki34" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( -68.7758, 22.1985 )

[node name="Flaki35" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( -17.4417, -15.4598 )

[node name="Flaki36" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 18.0364, -17.8382 )

[node name="Flaki37" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 40.6313, -27.7482 )

[node name="Flaki38" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 75.3165, -38.0547 )

[node name="Flaki39" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 104.452, -28.7392 )

[node name="Flaki40" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 68.7759, -4.36047 )

[node name="Flaki41" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 65.01, 24.7751 )

[node name="Flaki42" type="Marker2D" parent="Sprite2D/FlakiSpawners"]
position = Vector2( 48.1629, -58.073 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
playback_process_mode = 0
playback_speed = 30.0
anims/AttackLeftHand = SubResource( 12 )
anims/Death = SubResource( 13 )
anims/Idle = SubResource( 8 )
anims/RESET = SubResource( 9 )
anims/Walk = SubResource( 11 )

[node name="RayChecker" parent="." instance=ExtResource( 6 )]
position = Vector2( 80, -40 )
checked_material = -1

[node name="End" type="Node2D" parent="RayChecker"]
position = Vector2( 0, 80 )

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="."]
volume_db = 10.0
max_distance = 1000.0
attenuation = 2.0
bus = "SFX"

[node name="ZIndexer" parent="." instance=ExtResource( 7 )]
z_index = 800

[connection signal="animation_finished" from="AnimationPlayer" to="." method="animation_finished"]
