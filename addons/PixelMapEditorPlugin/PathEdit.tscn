[gd_scene load_steps=3 format=2]

[sub_resource type="GDScript" id=1]
script/source = "tool
extends Control

@onready var line := $LineEdit
@onready var dialog := $Control/FileDialog

var path: String: get = get_path2, set = set_path

signal path_changed

func _ready() -> void:
	line.connect(\"text_changed\", Callable(self, \"update_path\"))

func update_path(discard = null):
	emit_signal(\"path_changed\")

func set_path(p: String):
	line.text = p

func get_path2() -> String:
	return line.text

func _on_Button_pressed() -> void:
	dialog.popup_centered()

func _on_FileDialog_file_selected(path: String) -> void:
	line.text = path
"

[sub_resource type="GDScript" id=2]
script/source = "tool
extends LineEdit

func _can_drop_data(position: Vector2, data) -> bool:
	if not \"type\" in data:
		return false
	
	if data.type != \"files\":
		return false
	
	if data.files.size() != 1:
		return false
	
	return data.files[0].get_extension() == \"png\"

func _drop_data(position: Vector2, data) -> void:
	text = data.files[0]
"

[node name="PathEdit" type="HBoxContainer"]
offset_right = 140.0
offset_bottom = 24.0
custom_minimum_size = Vector2( 140, 0 )
script = SubResource( 1 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="LineEdit" type="LineEdit" parent="."]
offset_right = 61.0
offset_bottom = 24.0
size_flags_horizontal = 3
script = SubResource( 2 )

[node name="Button" type="Button" parent="."]
offset_left = 65.0
offset_right = 136.0
offset_bottom = 24.0
text = "Save as..."

[node name="Control" type="Control" parent="."]
offset_left = 140.0
offset_right = 140.0
offset_bottom = 24.0

[node name="FileDialog" type="FileDialog" parent="Control"]
offset_left = -12.816
offset_top = 87.8572
offset_right = 735.184
offset_bottom = 548.857
window_title = "Zapisz plik"
filters = PackedStringArray( "*.png" )
__meta__ = {
"_edit_use_anchors_": false
}

[connection signal="pressed" from="Button" to="." method="_on_Button_pressed"]
[connection signal="file_selected" from="Control/FileDialog" to="." method="_on_FileDialog_file_selected"]
